# -*- coding: utf-8 -*-
# vim: ft=yaml
---
{% macro repo(name, uri, oscode) %}
{{ uriname|default(name, true) }}:
  pkg:
    component:
      mongod:
        pkg:
          archive:
            source: https://fastdl.mongodb.org/linux/mongodb-linux-ARCH-{{ oscode }}-VER.tgz
            source_hash: https://fastdl.mongodb.org/linux/mongodb-linux-ARCH-{{ oscode }}-VER.tgz.sha256
          package:
            source: https://repo.mongodb.org/{{ uri|replace('COMP', 'mongodb-org-server') }}
            skip_verify: true
      dbtools:
        archive:
          source: https://fastdl.mongodb.org/tools/db/mongodb-database-tools-{{ oscode }}-ARCH-VER.tgz  # noqa 204
          skip_verify: true
      shell:
        package:
          source: https://repo.mongodb.org/{{ uri|replace('COMP', 'shell') }}
          skip_verify: true
    connectors:
      bi:
        archive:
          source: https://info-mongodb-com.s3.amazonaws.com/mongodb-bi/v2/mongodb-bi-linux-ARCH-{{ oscode }}-vVER.tgz  # noqa 204
          source_hash: https://info-mongodb-com.s3.amazonaws.com/mongodb-bi/v2/mongodb-bi-linux-ARCH-{{ oscode }}-vVER.tgz.sha256  # noqa 204

{% endmacro %}

{# from https://www.mongodb.com/download-center/community #}
{{ repo('Amazon-2', '/yum/amazon/2/NAME/REL/ARCH/RPMS/COMP-VER.amzn2.ARCH.rpm', 'amazon2') }}
{{ repo('CentOS Linux-6', '/yum/redhat/6/NAME/REL/ARCH/RPMS/COMP-VER.el6.ARCH.rpm', 'rhel62') }}
{{ repo('CentOS Linux-7', '/yum/redhat/7/NAME/REL/ARCH/RPMS/COMP-VER.el7.ARCH.rpm', 'rhel70') }}
{{ repo('CentOS Linux-8', '/yum/redhat/8/NAME/REL/ARCH/RPMS/COMP-VER.el8.ARCH.rpm', 'rhel80') }}
{{ repo('Debian-9', '/apt/debian/stretch/NAME/REL/main/binary-ARCH/mongodb-org-server_VER_ARCH.deb', 'debian92') }}  # noqa 204
{{ repo('Debian-10', '/apt/debian/buster/NAME/REL/main/binary-ARCH/mongodb-org-server_VER_ARCH.deb', 'debian10') }}  # noqa 204
{{ repo('Fedora-31', '/yum/redhat/8/NAME/REL/ARCH/RPMS/COMP-VER.el8.ARCH.rpm', 'rhel80') }}
{{ repo('Fedora-32', '/yum/redhat/8/NAME/REL/ARCH/RPMS/COMP-VER.el8.ARCH.rpm', 'rhel80') }}
{{ repo('Fedora-33', '/yum/redhat/8/NAME/REL/ARCH/RPMS/COMP-VER.el8.ARCH.rpm', 'rhel80') }}
{{ repo('Leap-15', '/zypper/suse/15/NAME/REL/ARCH/RPMS/COMP-VER.suse15.ARCH.rpm', 'suse15') }}
{{ repo('Suse', '/zypper/suse/12/NAME/REL/ARCH/RPMS/COMP-VER.suse12.ARCH.rpm', 'suse12') }}
{{ repo('Ubuntu-16.04', '/apt/ubuntu/dists/xenial/NAME/REL/multiverse/binary-ARCH/COMP_VER_ARCH.deb', 'ubuntu1604') }}  # noqa 204
{{ repo('Ubuntu-18.04', '/apt/ubuntu/dists/bionic/NAME/REL/multiverse/binary-ARCH/COMP_VER_ARCH.deb', 'ubuntu1804') }}  # noqa 204
{{ repo('Ubuntu-20.04', '/apt/ubuntu/dists/bionic/NAME/REL/multiverse/binary-ARCH/COMP_VER_ARCH.deb', 'ubuntu2004') }}
